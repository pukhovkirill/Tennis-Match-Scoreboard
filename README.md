## Проект “Tабло теннисного матча”


Автор идеи: https://github.com/zhukovsd

Авторское тз: https://zhukovsd.github.io/java-backend-learning-course/Projects/TennisScoreboard/


## Стек

- Java
- Maven
- Backend
    - Java сервлеты
    - Веб - GET и POST запросы, формы
    - Java Servlets, JSP
- Базы данных - SQL, Hibernate, H2 (in-memory SQL database)
- Frontend - HTML/CSS, блочная вёрстка
- Тесты - юнит тестирование, JUnit 5

## Интерфейс приложения

### Главная страница

- Ссылки, ведущие на страницы нового матча и списка завершенных матчей

### Страница нового матча

- Адрес - `/new-match`.

Интерфейс:

- HTML форма с полями “Имя игрока 1”, “Имя игрока 2” и кнопкой “начать”
- Нажатие кнопки “начать” приводить к POST запросу по адресу `/new-match`

Обработчик POST запроса:

- Проверяет существование игроков в таблице `Players`. Если игрока с таким именем не существует, создаём
- Создаём экземпляр класса `Match` (содержащий айди игроков и текущий счёт) и кладём в коллекцию текущих матчей (существующую только в памяти приложения, либо в key-value storage). Ключом коллекции является UUID, значением - экземпляр класса `Match`
- Редирект на страницу `/match-score?uuid=$match_id`

### Страница счёта матча - `/match-score`

Адрес - `/match-score?uuid=$match_id`. GET параметр `uuid` содержит UUID матча.

Интерфейс:

- Таблица с именами игроков, текущим счётом
- Формы и кнопки для действий - “игрок 1 выиграл текущее очко”, “игрок 2 выиграл текущее очко”
- Нажатие кнопок приводит к POST запросу по адресу `/match-score?uuid=$match_id`, в полях отправленной формы содержится айди выигравшего очко игрока

Обработчик POST запроса:

- Извлекает из коллекции экземпляр класса Match
- В соответствии с тем, какой игрок выиграл очко, обновляет счёт матча
- Если матч не закончился - рендерится таблица счёта матча с кнопками, описанными выше
- Если матч закончился:
  - Удаляем матч из коллекции текущих матчей
  - Записываем законченный матч в SQL базу данных
  - Рендерим финальный счёт

### Страница сыгранных матчей - `/matches`

Адрес - `/matches?filter_by_player_name=$player_name&page=$page_number`. GET параметры:
- `page` - номер страницы. Если параметр не задан, подразумевается первая страница
- `filter_by_player_name` - имя игрока, матчи которого ищем. Если параметр не задан, отображаются все матчи

Постранично отображает список сыгранных матчей. Позволяет искать матчи игрока по его имени. Для постраничного отображения потребуется реализация пагинации.

Интерфейс:

- Форма с фильтром по имени игрока. Поле ввода для имени и кнопка “искать”. По нажатию формируется GET запрос вида `/matches?filter_by_player_name=${NAME}`
- Список найденных матчей
- Переключатель страниц, если матчей найдено больше, чем влезает на одну страницу

## База данных

В качестве базы данных используется H2. Это in-memory SQL база для Java.

### Таблица `player`

В таблицу `player` игроки сохраняются в момент создания матча.

| Колонка  | Тип     | Комментарий                   |
|----------|---------|-------------------------------|
| id       | int     | Автоинкремент, первичный ключ |
| name     | varchar | Имя игрока                    |

### Таблица `match`

В таблицу `match` сохраняются доигранные матчи в момент их завершения.

| Колонка  | Тип     | Комментарий                   |
|----------|---------|-------------------------------|
| id       | int     | Автоинкремент, первичный ключ |
| name     | varchar | Имя игрока                    |

## Тесты

Юнит тестирование - JUnit 5

### Гейм
✅| При счёте 40:30 и 30:40 выигрывает соответственно игрок 1 и игрок 2\
✅| При 40:40 объявляется `deuce`\
✅| Ad-In x2 - выигрывает игрок 1\
✅| Ad-In x2 - выигрывает игрок 2

### Сет
✅| При счёте по играм 6:4 - игроку 1 нужно выиграть следующую игру чтобы выиграть сет\
✅| При счёте по играм 5:6 - игроку 2 нужно выиграть следующую игру чтобы выиграть сет\
✅| При счёте по играм 6:6 - объявляется tie-break\
✅| при счёте по играм 8:6 - выигрывает игрок 1\
✅| при счёте по играм 7:9 - выигрывает игрок 2

### Матч
✅| При счёте по сетам 2:0 - выигрывает игрок 1\
✅| При счёте по сетам 2:1 - выигрывает игрок 1\
✅| При счёте по сетам 1:2 - выигрывает игрок 2\
✅| При счёте по сетам 0:2 - выигрывает игрок 2

